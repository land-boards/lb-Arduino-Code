<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head profile="http://gmpg.org/xfn/11">

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Lab3 - Laboratory for Experimental Computer Science</title>

<meta name="generator" content="WordPress 4.0.1">

<!-- favicon -->

<link rel="shortcut icon" href="http://interface.khm.de/favicon.ico" type="image/x-icon">

<!-- css -->

<link rel="stylesheet" href="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/reset.css" type="text/css" media="screen">

<link rel="stylesheet" href="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/style.css" type="text/css" media="screen">

<!-- additional info -->

<link rel="alternate" type="application/rss+xml" title="Lab3 RSS Feed" href="http://interface.khm.de/index.php/feed/">

<link rel="pingback" href="http://interface.khm.de/xmlrpc.php">

<!-- js -->

<script type="text/javascript" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/mootools.js"></script>

<script type="text/javascript" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/mootoolsMore.js"></script>

<script type="text/javascript" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/imageGallery.js"></script>

<script type="text/javascript" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/redirect.js"></script>

<script type="text/javascript">

	window.addEvent('domready', function() {

		// add click event to overlay

		$('imageGalleryOverlay').addEvent('click', function() {

			// show image gallery

			showImageGallery(false);

		});

		// do this when resizing window

		window.addEvent('resize',function(){

			// resize ovlerlay

			resizeOverlay();

		});

		// do this when scrolling window

		window.addEvent('scroll',function(){

			// resize ovlerlay

			resizeOverlay();

		});

	});

</script>



<!--das nicht loeschen, plugins brauchen dies wie zb wpseo das ich empfehle-->

<link rel="stylesheet" id="wp-pagenavi-css" href="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/pagenavi-css.css" type="text/css" media="all">
<script type="text/javascript" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/processing.js"></script>
<script type="text/javascript" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/jquery.js"></script>
<script type="text/javascript" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/jquery-migrate.js"></script>
<script type="text/javascript" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/init.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://interface.khm.de/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://interface.khm.de/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Servo controller" href="http://interface.khm.de/index.php/lab/interfaces-basics/using-poti-to-control-a-servo-motor/">
<link rel="next" title="Decisions: if/else" href="http://interface.khm.de/index.php/lab/interfaces-basics/decisions-ifelse/">
<meta name="generator" content="WordPress 4.0.1">
<link rel="canonical" href="http://interface.khm.de/index.php/lab/interfaces-advanced/arduino-frequency-counter-library/">
<link rel="shortlink" href="http://interface.khm.de/?p=1600">
<meta property="og:type" content="article"><meta property="og:url" content="http://interface.khm.de/index.php/lab/interfaces-advanced/arduino-frequency-counter-library/"><meta property="og:title" content="Arduino Frequency Counter Library"><meta property="og:description" content=""><meta property="og:image" content="http://interface.khm.de/wp-content/uploads/2009/01/freqcounter.jpg"><!-- Vipers Video Quicktags v6.5.2 | http://www.viper007bond.com/wordpress-plugins/vipers-video-quicktags/ -->
<style type="text/css">
.vvqbox { display: block; max-width: 100%; visibility: visible !important; margin: 10px auto 10px 0; } .vvqbox img { max-width: 100%; height: 100%; } .vvqbox object { max-width: 100%; } 
</style>
<script type="text/javascript">
// <![CDATA[
	var vvqflashvars = {};
	var vvqparams = { wmode: "opaque", allowfullscreen: "true", allowscriptaccess: "always" };
	var vvqattributes = {};
	var vvqexpressinstall = "http://interface.khm.de/wp-content/plugins/vipers-video-quicktags/resources/expressinstall.swf";
// ]]>
</script>

</head>

<body>

<!-- header -->

<div id="header">

	<!-- logo Lab3 -->

	<div id="logoLab3">

		<a href="http://interface.khm.de/">

			<img src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/logoLab3.png" alt="logoLab3">

		</a>

		<div id="subtitle">

			<a href="http://interface.khm.de/">

				Laboratory for Experimental Computer Science<br>

				at the Academy of Media Arts Cologne

			</a>

		</div>

	</div>

	<!-- logo KHM -->

	<div id="logoKHM">

		<a href="http://www.khm.de/" target="_blank">

			<img src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/logoKHM.htm" alt="logoKHM">

		</a>

	</div>

</div>

<div id="breadcrumb">

	<a href="http://interface.khm.de/">Home</a> <span class="trenner">/</span> <a href="http://interface.khm.de/index.php/lab">Lab</a> <span class="trenner">/</span> <a href="http://interface.khm.de/index.php/lab/interfaces-advanced">Interfaces Advanced</a>
</div>

<!-- image gallery -->

<div id="imageGalleryContainer">

	<div id="imageContainer"></div>

	<a href="javascript:void(0)" onclick="showImageGallery(false)" title="click to close">

		<div class="closeGalleryBullet"></div>

	</a>

	<div id="metaInfoContainer"></div>

	<div id="paginationContainer"></div>

</div>

<!-- overlay image gallery -->

<div id="imageGalleryOverlay"></div>
<div id="content">

	<div class="standardPostSingleView">

		<!-- loop startet -->

	    
			<!-- title -->

			<h1 class="postTitle">Arduino Frequency Counter Library</h1>

			<!-- preview image -->

			
			<!-- meta info -->

			<div class="metaInfoContainer">

				
			</div>

			<!-- single view content container -->

			<div class="singleViewContentContainerLabor">
				<!-- content -->

				<p><a href="http://interface.khm.de/wp-content/uploads/2009/01/freqcounter.jpg"><img class="size-full wp-image-1602" title="freqcounter" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/freqcounter.jpg" alt="&lt;/p&gt; &lt;p&gt;" width="370" height="295"></a></p>
<p><br class="spacer_"></p>
<p>From our&nbsp;â€º <a href="http://interface.khm.de/index.php/labor/experimente/theremin-as-a-capacitive-sensing-device/">Theremin Project</a>
 I derived this Frequency Counter Library. The library makes it possible
 to measure frequencies with a high resolution and accuracy.</p>
<p><br class="spacer_"></p>
<p>The Frequency input is fixed to digital pin 5. This pin is mapped to 
the alternate port function T1 which is the input 16 Bit Hardware 
Counter1. To obtain a higher resolution than 16 Bit,&nbsp; the counter 
overflows are counted also and are calculated with the counter value to 
the final long integer result. The Frequency Source output must have a 
digital level so that weak Signals have to be amplified for instance by 
an single transistor or a 74HC14 inverter. The maximum input frequency 
is about 8 MHz when signal duty cycle is 50%.</p>
<p><br class="spacer_"></p>
<p>If you like to measure higher frequencies you have to use an 
prescaler or divider circuit which can be used from other counter 
projects published in the web. The Gate Time for the counting period can
 be chosen in the start() function where values of 10, 100 or 1000 ms 
are practicable for a resolution of 100, 10 and 1 Hz&nbsp; but any value
 can be used. The internal resolution of the gatetime is 2 ms so that 
the time can be varied in the increment of 2. If you wish to minimize 
the indication error the value of&nbsp; FreqCounter::f_comp variable can
 compensate slight gatetime errors. Compared to an commercial ACECO 
counter it is possible to trim the deviation to almost zero over the 
whole range. For gatetimes of 10,100,100 the&nbsp; values 1, 10 and 100 
where found to be good for our Duemilanova boards.</p>
<p><br class="spacer_"></p>
<h2>Example Programm</h2>
<p><br class="spacer_"></p>
<pre>#include &lt;FreqCounter.h&gt;

void setup() {
&nbsp; Serial.begin(57600);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// connect to the serial port
&nbsp; Serial.println("Frequency Counter");
}

long int frq;
Void loop() {

&nbsp;FreqCounter::f_comp= 8; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// Set compensation to 12
&nbsp;FreqCounter::start(100);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// Start counting with gatetime of 100ms
&nbsp;while (FreqCounter::f_ready == 0) &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// wait until counter ready
&nbsp;
&nbsp;frq=FreqCounter::f_freq;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// read result
&nbsp;Serial.println(frq);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// print result
&nbsp;delay(20);
}
</pre>
<p><br class="spacer_"></p>
<h2>Preamplifier schematics</h2>
<p><br class="spacer_"></p>
<p><a href="http://interface.khm.de/wp-content/uploads/2009/01/preamp.gif"><img class="size-full wp-image-1603" title="preamp" src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/preamp.gif" alt="&lt;br /&gt;" width="617" height="189"></a></p>
<p><br class="spacer_"></p>
<p><br class="spacer_"></p>
<h2>Source Codes</h2>
<p><span style="color: #ff0000;">Updated 10/2010 ; works with atmega328; removed some glitches</span></p>
<p><span style="color: #ff0000;">Updated 1/2012 ; Arduino 1.0<br>
 </span></p>
<p>Download&nbsp; <a href="http://interface.khm.de/wp-content/uploads/2009/01/FreqCounter_1_12.zip">&gt;FreqCounter</a> Library</p>
<p><br class="spacer_"></p>
<h2>Forum</h2>
<p>further questions to this topic can be discussed here:</p>
<p><a href="http://arduino.cc/forum/index.php/topic,64219.0.html">http://arduino.cc/forum/index.php/topic,64219.0.html</a></p>
<p><a href="http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?board=dev"></a><a href="http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1231326297">http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1231326297</a></p>
<p><br class="spacer_"></p>
<h2>Contact</h2>
<p>Martin Nawrath, <a href="mailto:nawrath@khm.de">nawrath@khm.de</a></p>
				
				<!-- seite editieren -->

			    
				<!-- linked posts -->

				
			</div>

		<!-- loop endet hier und auch ein artikel ist zu ende -->

		
	</div>

	<!-- footer -->

	<!--nicht loeschen einige plugins brauchen dies-->

<!-- MathJax Latex Plugin installed: Disabled as no shortcodes on this page -->
<div id="footer">

	Lab3, <a href="http://www.khm.de/" target="_blank">Academy of Media Arts Cologne</a>, Peter-Welter-Platz 2 50676 Cologne, 

	<a href="http://interface.khm.de/index.php/imprint/">Imprint</a>

</div>




</div>	

<!-- sidebar -->

<!--sidebar.php-->

<div id="sidebar">

	<div id="mainNavi">

		<ul>

				

			<!-- list pages -->

			<li class="page_item page-item-3771 page_item_has_children"><a href="http://interface.khm.de/index.php/lab-log/">Lab Log</a>
<ul class="children">
	<li class="page_item page-item-23"><a href="http://interface.khm.de/index.php/lab-log/events/">Events</a></li>
	<li class="page_item page-item-25"><a href="http://interface.khm.de/index.php/lab-log/awards/">Awards</a></li>
</ul>
</li>
<li class="page_item page-item-21"><a href="http://interface.khm.de/index.php/projects/">Student Works</a></li>
<li class="page_item page-item-3772 page_item_has_children"><a href="http://interface.khm.de/index.php/research/">Research</a>
<ul class="children">
	<li class="page_item page-item-3774"><a href="http://interface.khm.de/index.php/research/experiments/">Experiments</a></li>
	<li class="page_item page-item-3773"><a href="http://interface.khm.de/index.php/research/current/">Current</a></li>
	<li class="page_item page-item-17"><a href="http://interface.khm.de/index.php/research/past/">Past</a></li>
</ul>
</li>
<li class="page_item page-item-1371 page_item_has_children"><a href="http://interface.khm.de/index.php/lab/">Lab</a>
<ul class="children">
	<li class="page_item page-item-3776"><a href="http://interface.khm.de/index.php/lab/interfaces-basics/">Interfaces Basics</a></li>
	<li class="page_item page-item-1372"><a href="http://interface.khm.de/index.php/lab/interfaces-advanced/">Interfaces Advanced</a></li>
</ul>
</li>
<li class="page_item page-item-29 page_item_has_children"><a href="http://interface.khm.de/index.php/teaching/">Teaching</a>
<ul class="children">
	<li class="page_item page-item-31"><a href="http://interface.khm.de/index.php/teaching/seminars/">Seminars</a></li>
	<li class="page_item page-item-35"><a href="http://interface.khm.de/index.php/teaching/guest-lectures/">Guest Lectures</a></li>
</ul>
</li>
<li class="page_item page-item-39 page_item_has_children"><a href="http://interface.khm.de/index.php/people/">People</a>
<ul class="children">
	<li class="page_item page-item-41"><a href="http://interface.khm.de/index.php/people/staff/">Staff</a></li>
	<li class="page_item page-item-43"><a href="http://interface.khm.de/index.php/people/doctoral-candidates/">Doctoral Candidates</a></li>
	<li class="page_item page-item-45"><a href="http://interface.khm.de/index.php/people/alumni/">Alumni</a></li>
</ul>
</li>
<li class="page_item page-item-47 page_item_has_children"><a href="http://interface.khm.de/index.php/publications/">Publications</a>
<ul class="children">
	<li class="page_item page-item-3310"><a href="http://interface.khm.de/index.php/publications/on-topic/">On Topic</a></li>
	<li class="page_item page-item-49"><a href="http://interface.khm.de/index.php/publications/books/">Books</a></li>
	<li class="page_item page-item-51"><a href="http://interface.khm.de/index.php/publications/articles/">Articles</a></li>
	<li class="page_item page-item-3051"><a href="http://interface.khm.de/index.php/publications/lectures/">Lectures</a></li>
</ul>
</li>
<li class="page_item page-item-53"><a href="http://interface.khm.de/index.php/galleries/">Galleries</a></li>
<li class="page_item page-item-55"><a href="http://interface.khm.de/index.php/contact/">Contact</a></li>

		</ul>

	</div>

	<!-- suche -->

	<div id="search">

		<form method="get" id="searchform" action="http://interface.khm.de/">
	<div>
		<input value="search" name="s" id="s" size="16" type="text">
		<input src="Lab3%20-%20Laboratory%20for%20Experimental%20Computer%20Science_files/arrowSearch.gif" alt="suchen!" type="image">
	</div>
</form>

	</div>

	<!-- rss -->

	<div id="rss">	

		<a href="http://interface.khm.de/index.php?feed=rss2" target="_blank">RSS-Feed</a>

	</div>

	<!-- backend -->

	
</div>

<script type="text/javascript">

var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");

/*Google Analytics Teil 1/2 (auskommentiert)*/
/*document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));*/

</script>








	






</body></html>